# TASK-20250905-1858-01: Terraform으로 DynamoDB 테이블 생성

## 작업 정보
- **작업 ID**: TASK-20250905-1858-01
- **제목**: Terraform으로 DynamoDB 테이블 생성
- **담당자**: 풍기덕
- **할당자**: 백승재
- **우선순위**: HIGH
- **상태**: TODO
- **예상 시간**: 2시간
- **생성일**: 2025-09-05 18:58
- **마감일**: 2025-09-06 08:00

## 작업 목표
시스템 아키텍처 설계 기반 DynamoDB 5개 테이블을 Terraform으로 생성 및 배포

## 상세 작업 내용

### 1. DynamoDB 테이블 5개 생성
**참고 문서**: `planning/design/architecture/데이터베이스스키마.md`

#### 📋 **Users 테이블**
```hcl
resource "aws_dynamodb_table" "users" {
  name           = "gmp-checkmaster-users"
  billing_mode   = "PAY_PER_REQUEST"
  hash_key       = "user_id"
  
  attribute {
    name = "user_id"
    type = "S"
  }
  
  attribute {
    name = "team"
    type = "S"
  }
  
  global_secondary_index {
    name     = "TeamIndex"
    hash_key = "team"
  }
}
```

#### 📋 **Templates 테이블**
```hcl
resource "aws_dynamodb_table" "templates" {
  name           = "gmp-checkmaster-templates"
  billing_mode   = "PAY_PER_REQUEST"
  hash_key       = "template_id"
  
  attribute {
    name = "template_id"
    type = "S"
  }
  
  attribute {
    name = "type"
    type = "S"
  }
  
  global_secondary_index {
    name     = "TypeIndex"
    hash_key = "type"
  }
}
```

#### 📋 **CheckRecords 테이블**
```hcl
resource "aws_dynamodb_table" "check_records" {
  name           = "gmp-checkmaster-check-records"
  billing_mode   = "PAY_PER_REQUEST"
  hash_key       = "record_id"
  
  attribute {
    name = "record_id"
    type = "S"
  }
  
  attribute {
    name = "user_id"
    type = "S"
  }
  
  attribute {
    name = "date"
    type = "S"
  }
  
  attribute {
    name = "status"
    type = "S"
  }
  
  global_secondary_index {
    name     = "UserDateIndex"
    hash_key = "user_id"
    range_key = "date"
  }
  
  global_secondary_index {
    name     = "StatusIndex"
    hash_key = "status"
  }
}
```

#### 📋 **Assignments 테이블**
```hcl
resource "aws_dynamodb_table" "assignments" {
  name           = "gmp-checkmaster-assignments"
  billing_mode   = "PAY_PER_REQUEST"
  hash_key       = "assignment_id"
  
  attribute {
    name = "assignment_id"
    type = "S"
  }
  
  attribute {
    name = "user_id"
    type = "S"
  }
  
  global_secondary_index {
    name     = "UserIndex"
    hash_key = "user_id"
  }
}
```

#### 📋 **AccessLogs 테이블**
```hcl
resource "aws_dynamodb_table" "access_logs" {
  name           = "gmp-checkmaster-access-logs"
  billing_mode   = "PAY_PER_REQUEST"
  hash_key       = "log_id"
  
  attribute {
    name = "log_id"
    type = "S"
  }
  
  attribute {
    name = "user_id"
    type = "S"
  }
  
  attribute {
    name = "timestamp"
    type = "N"
  }
  
  global_secondary_index {
    name     = "UserTimestampIndex"
    hash_key = "user_id"
    range_key = "timestamp"
  }
}
```

### 2. Terraform 파일 구조
```
development/infrastructure/terraform/
├── main.tf              # 프로바이더 설정
├── variables.tf         # 변수 정의
├── dynamodb.tf          # DynamoDB 테이블들
├── outputs.tf           # 출력 값들
└── terraform.tfvars     # 환경별 변수 값
```

### 3. 환경 변수 설정
```hcl
# terraform.tfvars
environment = "dev"
project_name = "gmp-checkmaster"
aws_region = "ap-northeast-2"
```

## 수용 기준
- [ ] 5개 DynamoDB 테이블 모두 생성 완료
- [ ] GSI(Global Secondary Index) 15개 모두 설정 완료
- [ ] Terraform 상태 파일 관리 설정
- [ ] 테이블 생성 확인 (AWS 콘솔 또는 CLI)
- [ ] 비용 최적화 (PAY_PER_REQUEST 모드)

## 참고 자료
- `planning/design/architecture/데이터베이스스키마.md`
- `development/setup/개발환경가이드.md`
- AWS DynamoDB Terraform 문서

## 의존성
- **선행 작업**: TASK-20250905-1752 (시스템 아키텍처 설계) 완료
- **후속 작업**: Lambda 함수 배포 (TASK-20250905-1858-02)

## 위험 요소
- AWS 자격 증명 설정 필요
- DynamoDB 테이블명 중복 가능성
- GSI 설정 오류 가능성

---
**생성일**: 2025-09-05 18:58  
**담당자**: 풍기덕  
**상태**: TODO
