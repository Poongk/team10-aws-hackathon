# WK-003: 체크리스트 작성 화면

## 기본 정보
- **화면 ID**: WK-003
- **화면명**: 체크리스트 작성
- **파일명**: `ChecklistForm.jsx`
- **사용자**: 작업자
- **접근경로**: 대시보드 → "체크리스트 작성"

## 와이어프레임

### 메인 체크리스트 화면
```
┌─────────────────────────┐
│  ← [뒤로]   위생상태 점검 │ ← 헤더
├─────────────────────────┤
│ ●●●●●○○○○  (5/9 완료)  │ ← 진행률 (상단 sticky)
├─────────────────────────┤
│                         │
│ 1. 발열, 설사, 구토 등의 │
│    증상은 없는가?        │
│                         │
│    [  예  ] [아니오]     │ ← 기본 항목
│                         │
├─────────────────────────┤
│                         │
│ 3. 신체 노출부위에 상처는│
│    없는가?              │
│                         │
│    [  예  ] [아니오] [잘모르겠음 AI] │ ← AI 활성화 (초록 배지)
│                         │
├─────────────────────────┤
│                         │
│ 4. 복장은 깨끗하고 규정에│
│    맞게 착용하였는가?    │
│                         │
│    [  예  ] [아니오] [잘모르겠음 AI] │ ← AI 비활성화 (회색 배지)
│                         │
├─────────────────────────┤
│          ... (9개 항목)  │
├─────────────────────────┤
│        [제출하기]        │ ← 모든 항목 완료 시 활성화
└─────────────────────────┘
```

## 주요 구성요소

### 헤더 (고정)
- 뒤로가기 버튼 (대시보드로)
- 제목: "위생상태 점검"

### 진행률 표시 (상단 sticky)
- **위치**: `position: sticky; top: 0`
- **도트 인디케이터**: ●●●●●○○○○ (완료/미완료)
- **텍스트**: "(5/9 완료)" 실시간 업데이트
- **배경**: 흰색 + 하단 그림자

### 체크리스트 항목 (9개)
1. **발열/설사/구토 증상**: 예/아니오
2. **호흡기 질환**: 예/아니오
3. **신체 상처**: 예/아니오/잘모르겠음 🟢AI (활성화)
4. **복장 상태**: 예/아니오/잘모르겠음 🔘AI (비활성화)
5. **장신구 착용**: 예/아니오
6. **두발/수염**: 예/아니오/잘모르겠음 🔘AI (비활성화)
7. **손톱 청결**: 예/아니오/잘모르겠음 🔘AI (비활성화)
8. **진한 화장**: 예/아니오/잘모르겠음 🔘AI (비활성화)
9. **작업용 외 물품**: 예/아니오

### AI 배지 시스템
- **🟢 초록 AI**: 클릭 가능 (3번 상처 항목)
- **🔘 회색 AI**: 비활성화 (4,6,7,8번 항목)
- **배지 없음**: 기본 예/아니오 항목

### 제출 버튼 (하단 일반)
- **활성화**: 모든 항목 완료 시 파란색
- **비활성화**: 미완료 시 회색
- **제출 시**: URL 파라미터로 결과 전달

## 기능 명세

### 판정 로직 (수정됨)
```javascript
const determineApproval = (answers) => {
  // 모든 답변이 '예'이거나 '잘모르겠음'이면 적합
  return Object.values(answers).every(answer => 
    answer === '예' || answer === '잘모르겠음'
  );
};
```

### URL 파라미터 제출 (신규)
```javascript
const handleSubmit = () => {
  const isApproved = determineApproval(answers);
  
  const params = new URLSearchParams({
    user: user.name,           // 김철수
    userId: user.user_id,      // EMP001
    approved: isApproved ? 'true' : 'false',
    expired: 'false'           // 새 결과는 항상 유효
  });
  
  navigate(`/mvp/result?${params.toString()}`);
};
```

### AI 판별 트리거 (기존)
- 3번 항목에서 "잘모르겠음" 선택 시
- AI-001 팝업 호출 (미구현)
- 결과 받아서 자동 업데이트

## UI 요구사항

### 진행률 Sticky 스타일
```css
.progress-section {
  position: sticky;
  top: 0;
  z-index: 10;
  background: white;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid #f0f0f0;
}
```

### AI 배지 스타일
```css
.ai-badge {
  background: #52c41a; /* 활성화: 초록색 */
  color: white;
}

.option-button.disabled .ai-badge {
  background: #bfbfbf; /* 비활성화: 회색 */
  color: #8c8c8c;
}
```

### 제출 버튼 (일반 위치)
- **위치**: 스크롤 하단 (sticky 제거됨)
- **활성화**: 모든 항목 완료 시에만
- **스타일**: 전체 너비 파란색 버튼

## 참고 문서
- **실제 구현**: WorkerChecklist.jsx
- **URL 파라미터**: `/mvp/result?user=김철수&userId=EMP001&approved=true&expired=false`
- **다음 화면**: WK-004 판정 결과 (파라미터 기반)

---
**작성일**: 2025-09-06  
**상태**: 개발 완료 ✅  
**업데이트**: 진행률 sticky, AI 배지 시스템, URL 파라미터 제출

### 진행률 표시
- 도트 인디케이터: ●●●●●○○○○
- 텍스트: "(5/9 완료)"
- 실시간 업데이트

### 체크리스트 항목 (9개)
1. **발열/설사/구토 증상**: 예/아니오
2. **호흡기 질환**: 예/아니오
3. **신체 상처**: 예/아니오/잘모르겠음 (AI 활성화)
4. **복장 상태**: 예/아니오/잘모르겠음 (비활성화)
5. **장신구 착용**: 예/아니오
6. **두발/수염**: 예/아니오/잘모르겠음 (비활성화)
7. **손톱 청결**: 예/아니오/잘모르겠음 (비활성화)
8. **진한 화장**: 예/아니오/잘모르겠음 (비활성화)
9. **작업용 외 물품**: 예/아니오

### 선택 버튼
- **활성화**: 파란색 테두리, 클릭 가능
- **비활성화**: 회색, 클릭 불가
- **선택됨**: 파란색 배경, 흰색 텍스트

### 제출 버튼
- 모든 항목 완료 시 활성화
- 미완료 시 비활성화 (회색)

## 기능 명세

### 항목별 처리
```javascript
const checklistItems = [
  { id: 'symptoms', type: 'basic', options: ['예', '아니오'] },
  { id: 'respiratory', type: 'basic', options: ['예', '아니오'] },
  { id: 'wounds', type: 'ai_enabled', options: ['예', '아니오', '잘모르겠음'] },
  { id: 'uniform', type: 'ai_disabled', options: ['예', '아니오', '잘모르겠음'] },
  // ... 나머지 항목
];
```

### AI 판별 트리거
- 3번 항목에서 "잘모르겠음" 선택 시
- AI-001 팝업 호출
- 결과 받아서 자동 업데이트

### 유효성 검사
- 모든 항목 필수 선택
- 미완료 시 제출 버튼 비활성화
- 완료 시 WK-004 결과 화면으로 이동

## UI 요구사항

### 항목 레이아웃
- 항목 간격: 24px
- 질문 텍스트: 16px, 진한 회색
- 버튼 높이: 44px (터치 최적화)
- 버튼 간격: 8px

### 진행률 표시
- 도트 크기: 12px
- 완료: 파란색 원
- 미완료: 회색 원
- 텍스트: 14px, 회색

### 상태별 스타일
```css
.option-button {
  border: 2px solid #d1d5db;
  background: white;
}

.option-button.selected {
  border-color: #3b82f6;
  background: #3b82f6;
  color: white;
}

.option-button.disabled {
  border-color: #e5e7eb;
  background: #f9fafb;
  color: #9ca3af;
  cursor: not-allowed;
}
```

## 참고 문서
- **상세분석**: 9개 항목 JSON 구조, AI 활성화/비활성화
- **시연시나리오**: 시나리오 1~4의 3단계 "체크리스트 작성"
- **사용자스토리**: US-003 기본 체크리스트 작성, US-004 AI 판별 요청

---
**작성일**: 2025-09-06  
**상태**: 개발 준비 완료
