# GMP CheckMaster AI - 요구사항 정의서 (v2.0)

## 프로젝트 개요
- **프로젝트명**: GMP CheckMaster AI
- **목적**: 제약업계 GMP 규정 준수를 위한 지능형 체크리스트 관리 시스템
- **팀**: drug qrew (백승재: 백엔드/AI, 풍기덕: 프론트엔드/배포)
- **해커톤 기간**: 2025-09-05 17:00 ~ 2025-09-06 18:00 (33시간)
- **기반 자료**: 일동제약 실제 체크리스트 3종 분석 결과

## 실제 체크리스트 기반 설계

### 분석된 실제 체크리스트
1. **작업원 일일 위생상태 점검표** (Version 3-00)
   - 유형: 출입통제형 (AI 판정 필수)
   - 항목: 9개 (발열/호흡기/상처/복장/장신구/두발/손톱/화장/물품)
   - 빈도: 매일 출근 전 (08:20까지)
   - 사용자: 출입이 필요한 모든 직원

2. **차압관리일지** (3-6-02, Version 3-01)
   - 유형: 일반기록형 (수치 기반 자동 판정)
   - 항목: 5개 (일시/구간/측정값/장비상태/특이사항)
   - 빈도: 하루 6-10회 (08:30부터 정시)
   - 사용자: 시설관리 전문 담당자

3. **자재 보관관리 점검표** (4-11-02, Version 3-00)
   - 유형: 일반기록형 (위험도 기반 종합 판정)
   - 항목: 9개 (입고/분류/선입선출/간격/보관조건/해충/배치/청소/특이사항)
   - 빈도: 주 1회 (일과시간 자유)
   - 사용자: 자재관리 전문 담당자

## 1. 기능 요구사항

### 1.1 핵심 기능 (MVP - Phase 1)

#### F-001: 위생상태 체크리스트 작성 및 AI 판정
**우선순위**: HIGH ⭐⭐⭐  
**설명**: 작업원이 일일 위생상태를 체크하고 AI가 출입 가능 여부를 즉시 판정

**상세 기능**:
- 실제 9개 항목 입력 UI (모바일 최적화)
- 다양한 입력 유형: 선택형(7개), 체크박스(2개)
- 실시간 입력 검증
- Amazon Q Developer 기반 AI 복합 판정
- 4가지 판정 결과: 자동거부/재확인/경고/의료상담

**판정 규칙**:
- **자동 거부**: 발열/설사/구토 증상=있음
- **재확인 필요**: 호흡기증상=있음 OR 상처=있음 OR 복장=부적절
- **경고**: 화장=부적절 OR 장신구=착용
- **의료상담**: 복합 증상 (발열+호흡기 등)

**부적합자 조치 관리**:
- **자동 거부** 또는 **의료상담** 판정 시 조치 필요 상태로 자동 설정
- 운영자가 조치 이유 및 조치 내용 작성 (예: "발열/설사/구토 증상으로 귀가 조치")
- 책임자가 조치 내용 확인 및 승인
- 조치 완료 후 추적 관리 (재검토 일정, 복귀 조건 등)
- 조치 이력 관리 및 통계 분석

**체크리스트 수정 정책**:
- **제출 후 5분 내**: 자유롭게 수정 가능 (실수 방지)
- **제출 후 5분 후**: 운영자에게 수정 요청 + 사유 작성 필요
- **출입 불가 판정 시**: 즉시 재검토 기회 제공 (긴급 상황)
- **수정 횟수 제한**: 1일 최대 3회 (남용 방지)
- **수정 이력 관리**: 모든 수정 내역 로그 저장

**수용 기준**:
- [ ] 2-3분 내 체크 완료 가능
- [ ] 5초 이내 AI 판정 완료
- [ ] 터치 최적화 모바일 UI
- [ ] 친근하고 명확한 판정 메시지
- [ ] 오프라인 임시 저장 지원
- [ ] 5분 내 수정 기능 제공
- [ ] 수정 요청 워크플로우 지원

#### F-002: 운영자 실시간 모니터링 대시보드
**우선순위**: HIGH ⭐⭐  
**설명**: 운영자가 전체 체크 현황을 실시간으로 모니터링하고 관리

**상세 기능**:
- 실시간 완료율 표시 (예: 85/100명 완료)
- 미완료자 목록 (이름, 부서, 연락처)
- 출입 불가자 현황 (이름, 사유)
- 시간대별 완료 추이 그래프
- 원클릭 알림 발송 (08:15 미완료자 독려)

**수용 기준**:
- [ ] 30초 간격 실시간 업데이트
- [ ] 부서별/팀별 필터링 가능
- [ ] 미완료자 일괄 알림 발송
- [ ] 모바일에서도 주요 현황 확인

#### F-003: 체크리스트 배정 관리
**우선순위**: HIGH ⭐⭐  
**설명**: 운영자가 작업자별 체크리스트 배정 및 예외 상황을 관리

**상세 기능**:
- 부서별/개별 배정 (드래그앤드롭)
- 예외 상황 관리: 휴가/출장/병가/정부/특근
- 자동 대체자 배정 시스템
- 배정 상태 실시간 표시 (🟢정상/🔴부재/🔵대체)
- 스케줄 설정 (기본: 월-금 08:20까지)

**수용 기준**:
- [ ] 부재 신고 시 30분 이내 자동 대체자 배정
- [ ] 특근/야근 시 임시 배정 가능
- [ ] 배정 이력 및 사유 관리
- [ ] HR 시스템 연동 (휴가 정보)

#### F-004: 책임자 팀 현황 모니터링
**우선순위**: HIGH ⭐  
**설명**: 책임자가 담당 팀의 체크 현황을 모바일에서 간편하게 확인

**상세 기능**:
- 팀별 완료율 및 순위
- 출입 불가자 즉시 알림 수신
- 팀원별 최근 이력 조회
- 원터치 팀원 연락 기능

**수용 기준**:
- [ ] 모바일 중심 간편한 UI
- [ ] 중요 알림 즉시 푸시 수신
- [ ] 팀 현황 한눈에 파악 가능

#### F-005: QR 코드 기반 출입 통제 확인
**우선순위**: HIGH ⭐  
**설명**: 작업자의 QR 코드를 통해 실시간 출입 가능 여부를 확인하는 보안 게이트 기능

**작업자 측 기능**:
- AI 판정 완료 후 개인 QR 코드 자동 생성
- 판정 결과별 QR 코드 색상 구분
  - 🟢 출입 가능: 녹색 QR + "출입 가능합니다"
  - 🔴 출입 불가: 빨간색 QR + "출입이 제한됩니다"
  - 🟡 재확인: 노란색 QR + "관리자 확인이 필요합니다"
- QR 코드 유효시간: 30분 (보안 강화)
- 오프라인에서도 QR 코드 표시 (로컬 저장)

**관리자/보안 담당자 측 기능**:
- QR 스캐너 화면 (카메라 연동)
- 실시간 출입 가능 여부 확인
- 작업자 정보 표시 (이름, 부서, 체크 시간, 판정 사유)
- 출입 로그 자동 기록 (시간, 장소, 결과)
- 수동 승인 기능 (재확인 필요 시)

**보안 기능**:
- QR 코드 암호화 (개인정보 보호)
- 일회성 토큰 (재사용 방지)
- 위치 기반 검증 (특정 출입구에서만 유효)
- 시간 기반 만료 (30분 후 자동 무효)

**수용 기준**:
- [ ] QR 코드 생성 1초 이내
- [ ] QR 스캔 후 2초 이내 결과 표시
- [ ] 오프라인에서도 QR 코드 표시
- [ ] 출입 로그 실시간 기록
- [ ] 보안 담당자 권한 관리

### 1.2 확장 기능 (Phase 2 - 해커톤 이후)

#### F-006: 차압관리일지 (수치 기반 자동 판정)
**우선순위**: MEDIUM  
**설명**: 시설관리 담당자가 차압을 측정하고 자동 판정 받는 기능

**상세 기능**:
- 정시 측정 스케줄 (08:30, 10:00, 12:00, 14:00, 16:00, 18:00)
- 5개 항목 입력 (일시/구간/측정값/장비상태/특이사항)
- 수치 기반 자동 판정 (적격/주의/부적격)
- 실시간 차압 트렌드 그래프
- 부적격 시 즉시 시설책임자 알림

**판정 기준**:
- **적격**: +1.1 mmH2O 이상 또는 -1.1 mmH2O 이하
- **주의**: 0.8~1.1 범위 (경고 알림)
- **부적격**: 0.5~0.8 범위 (즉시 알림)

#### F-007: 자재보관관리 점검표 (위험도 기반 종합 판정)
**우선순위**: MEDIUM  
**설명**: 자재관리 담당자가 창고를 종합 점검하고 위험도 기반 판정 받는 기능

**상세 기능**:
- 주간 점검 스케줄 (일과시간 자유)
- 9개 항목 입력 (위험도별 가중치 적용)
- 조건부 사진 업로드 (부적합 시 필수)
- 해충 발견 시 긴급 대응 프로세스
- 종합 점수 및 등급 (우수/양호/주의/개선필요)

**위험도 가중치**:
- 해충 흔적: 10 (최고) → 즉시 알림
- 보관조건: 9 → 4시간 이내 알림
- 품목 분류: 8 → 당일 알림

#### F-008: 전문 담당자 배정 및 부재 관리
**우선순위**: MEDIUM  
**설명**: 시설/자재 전문 담당자 배정 및 부재 시 대체 인력 자동 관리

**상세 기능**:
- 주/부/백업 담당자 3단계 배정
- 부재 상황별 자동 대체 (휴가/출장/병가/정부)
- 담당자 자격 및 교육 이력 관리
- 업무량 균등 분배 및 순환 배정

### 1.3 고도화 기능 (Phase 3 - 상용화)

#### F-009: 통합 데이터 분석 및 리포트
**우선순위**: LOW  
**설명**: 전체 체크리스트 데이터를 분석하여 인사이트 및 리포트 제공

#### F-010: 고급 시스템 관리 및 템플릿 편집
**우선순위**: LOW  
**설명**: 관리자가 체크리스트 템플릿을 생성/편집하고 AI 규칙을 설정

## 2. 사용자 요구사항

### 2.1 사용자 역할 정의

#### 작업자 (Worker)
**대상**: 출입이 필요한 직원 (생산부, 품질관리부 등)  
**주요 업무**: 위생상태 체크리스트 작성  
**사용 빈도**: 매일 출근 전 (08:20까지)  
**사용 환경**: 스마트폰 (모바일 앱/웹)

**요구사항**:
- 2-3분 내 빠른 체크 완료
- 직관적이고 터치 친화적 UI
- 명확한 판정 결과 및 안내
- 오프라인에서도 임시 저장 가능

#### 시설관리 담당자 (Facility Manager)
**대상**: 시설관리팀 전문 담당자 (5명 내외)  
**주요 업무**: 차압 측정 및 기록 (Phase 2)  
**사용 빈도**: 하루 6-10회 (정시 측정)  
**사용 환경**: 스마트폰/태블릿

**요구사항**:
- 1-2분 내 신속한 측정값 입력
- 음성 입력 지원 (측정값)
- 실시간 트렌드 확인
- 부적격 시 즉시 알림 수신

#### 자재관리 담당자 (Storage Manager)
**대상**: 자재관리팀 전문 담당자 (3명 내외)  
**주요 업무**: 창고 종합 점검 (Phase 2)  
**사용 빈도**: 주 1회 (30-45분 소요)  
**사용 환경**: 태블릿 (사진 촬영 필요)

**요구사항**:
- 체계적인 점검 가이드
- 조건부 사진 업로드
- 오프라인 점검 후 동기화
- 해충 발견 시 긴급 대응 지원

#### 운영자 (Operator)
**대상**: 체크리스트 운영 담당자 (1-2명)  
**주요 업무**: 배정 관리, 현황 모니터링, 알림 발송  
**사용 빈도**: 상시 (특히 오전 8시 전후)  
**사용 환경**: 데스크톱/태블릿

**요구사항**:
- 실시간 통합 현황 대시보드
- 드래그앤드롭 배정 관리
- 원클릭 알림 발송
- 예외 상황 신속 처리

#### 책임자 (Supervisor)
**대상**: 팀장/부서장급 관리자  
**주요 업무**: 팀 현황 모니터링, 의사결정  
**사용 빈도**: 필요시 (주로 오전)  
**사용 환경**: 스마트폰 (모바일 중심)

**요구사항**:
- 간편한 팀 현황 확인
- 중요 알림 즉시 수신
- 원터치 팀원 연락
- 의사결정 지원 정보

### 2.2 사용자 시나리오

#### 일반적인 하루 흐름
```
07:30 - 작업자들이 위생상태 체크 시작 가능
08:15 - 운영자가 미완료자 현황 확인 및 독려 알림 발송
08:20 - 체크 마감 시간 (출근 10분 전)
08:25 - 책임자가 팀 완료 현황 및 출입 불가자 확인
08:30 - 정상 출근 시작 + 시설담당자 첫 차압 측정 (Phase 2)
```

#### 예외 상황 처리
```
출입 불가 판정 → 즉시 알림 → 책임자 확인 → 귀가/의료상담 결정
담당자 부재 → 자동 대체자 배정 → 백업 담당자 알림 → 업무 인계
해충 발견 → 즉시 격리 → 방제업체 연락 → 재점검 스케줄링
```

## 3. 비기능 요구사항

### 3.1 성능 요구사항

#### 응답 시간
- **AI 판정**: 5초 이내 완료
- **대시보드 로딩**: 3초 이내
- **데이터 동기화**: 30초 간격
- **알림 발송**: 1분 이내

#### 동시 사용자
- **피크 시간**: 100명 동시 접속 (08:00-08:20)
- **일반 시간**: 20명 동시 접속
- **대시보드**: 10명 동시 모니터링

#### 가용성
- **서비스 가동률**: 99.5% 이상
- **계획된 점검**: 주말 새벽 시간대
- **장애 복구**: 30분 이내

### 3.2 보안 요구사항

#### 데이터 보호
- **개인정보 암호화**: 건강 데이터 AES-256 암호화
- **전송 암호화**: TLS 1.2 이상
- **접근 제어**: 역할 기반 권한 관리
- **감사 로그**: 모든 접근 및 변경 이력 기록

#### 인증 및 권한
- **사용자 인증**: AWS Cognito 기반
- **세션 관리**: 8시간 자동 만료
- **권한 분리**: 5가지 역할별 차등 권한
- **API 보안**: JWT 토큰 기반 인증

### 3.3 확장성 요구사항

#### 사용자 확장
- **현재**: 100명 (일동제약 기준)
- **1년 후**: 500명 (다른 부서 확장)
- **3년 후**: 2,000명 (다른 공장 확장)

#### 기능 확장
- **Phase 1**: 위생상태 체크리스트 (MVP)
- **Phase 2**: 차압 + 자재보관 체크리스트
- **Phase 3**: 다양한 GMP 체크리스트 추가

#### 기술 확장
- **데이터베이스**: DynamoDB Auto Scaling
- **컴퓨팅**: AWS Lambda 자동 확장
- **스토리지**: S3 무제한 확장

### 3.4 호환성 요구사항

#### 브라우저 지원
- **모바일**: Chrome Mobile, Safari Mobile (iOS 12+, Android 8+)
- **데스크톱**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+

#### 디바이스 지원
- **스마트폰**: iOS 12+, Android 8+ (작업자/책임자)
- **태블릿**: iPad, Android 태블릿 (자재관리 담당자)
- **데스크톱**: Windows 10+, macOS 10.15+ (운영자)

#### 네트워크 환경
- **온라인**: 실시간 동기화 및 AI 판정
- **오프라인**: 임시 저장 후 온라인 시 자동 동기화
- **저속 네트워크**: 3G 환경에서도 기본 기능 동작

## 4. 기술 요구사항

### 4.1 시스템 아키텍처

#### 클라우드 플랫폼
- **AWS 기반**: 완전 서버리스 아키텍처
- **리전**: ap-northeast-2 (서울)
- **가용 영역**: Multi-AZ 배포

#### 핵심 서비스
- **컴퓨팅**: AWS Lambda (Node.js 18.x)
- **데이터베이스**: Amazon DynamoDB
- **AI**: Amazon Q Developer + Bedrock
- **API**: Amazon API Gateway
- **인증**: Amazon Cognito
- **스토리지**: Amazon S3
- **CDN**: Amazon CloudFront

### 4.2 데이터베이스 설계

#### DynamoDB 테이블 구조
1. **Users**: 사용자 정보 및 권한
2. **Templates**: 체크리스트 템플릿 및 AI 규칙
3. **CheckRecords**: 체크 기록 및 판정 결과
4. **Assignments**: 배정 관리 및 스케줄

#### 인덱스 설계
- **GSI-1**: 사용자별 이력 조회
- **GSI-2**: 날짜별 현황 조회
- **GSI-3**: 미완료자 실시간 조회
- **GSI-4**: 팀별 현황 조회

### 4.3 AI 및 판정 시스템

#### Amazon Q Developer 연동
- **용도**: 위생상태 복합 판정
- **입력**: 10개 항목 응답 데이터
- **출력**: 4가지 판정 결과 + 근거 + 메시지
- **성능**: 5초 이내 응답

#### 자동 판정 엔진
- **수치 기반**: 차압 임계값 비교
- **위험도 기반**: 가중치 점수 계산
- **규칙 엔진**: 유연한 판정 규칙 설정

## 5. 제약사항 및 가정

### 5.1 해커톤 제약사항

#### 시간 제약
- **총 시간**: 33시간 (2025-09-05 17:00 ~ 2025-09-06 18:00)
- **개발 시간**: 약 25시간 (휴식 시간 제외)
- **발표 준비**: 2시간

#### 인력 제약
- **개발자**: 2명 (백엔드 1명, 프론트엔드 1명)
- **역할 분담**: 독립적 개발 후 통합
- **협업 도구**: Git, 실시간 소통

#### 기능 제약
- **MVP 집중**: Phase 1 기능만 완전 구현
- **완성도 우선**: 80% 완성도로 전체 기능 구현
- **확장성 고려**: Phase 2, 3 확장 가능한 구조

### 5.2 기술적 가정

#### AWS 서비스 가용성
- **Amazon Q Developer**: 정상 서비스 가정
- **DynamoDB**: 충분한 읽기/쓰기 용량
- **Lambda**: 동시 실행 제한 내 운영

#### 데이터 가정
- **사용자 수**: 100명 (일동제약 기준)
- **일일 체크**: 100건/일
- **피크 시간**: 08:00-08:20 (80% 집중)

#### 네트워크 가정
- **인터넷 연결**: 안정적인 4G/WiFi 환경
- **지연 시간**: 100ms 이내
- **대역폭**: 1Mbps 이상

## 6. 성공 기준

### 6.1 기능적 성공 기준
- [ ] 실제 위생상태 점검표 10개 항목 완전 구현
- [ ] AI 판정 시스템 정상 작동 (5초 이내 응답)
- [ ] QR 코드 기반 출입 통제 확인 시스템 구현
- [ ] 운영자 대시보드에서 실시간 현황 확인
- [ ] 모바일에서 체크리스트 완료 → QR 코드 생성 → 출입 확인
- [ ] 4가지 사용자 역할별 화면 구현

### 6.2 기술적 성공 기준
- [ ] AWS 클라우드 완전 배포
- [ ] Amazon Q Developer AI 연동 성공
- [ ] 반응형 웹 (모바일/데스크톱 모두 지원)
- [ ] 실시간 데이터 동기화
- [ ] 기본적인 보안 및 권한 관리

### 6.3 비즈니스 성공 기준
- [ ] 실제 일동제약 업무 흐름 정확히 반영
- [ ] 사용자 친화적 UI/UX (3분 내 체크 완료)
- [ ] 실용적인 AI 판정 메시지
- [ ] QR 코드 출입 통제로 실제 보안 시스템 연동 시연
- [ ] 확장 가능한 아키텍처 설계
- [ ] 데모 시연 시 실제 사용 시나리오 재현 (체크→판정→QR→출입확인)

---
**문서 버전**: v2.0  
**작성일**: 2025-09-05  
**기반 자료**: 일동제약 실제 체크리스트 3종 분석 결과  
**관련 문서**: 사용자 스토리 29개, MVP 우선순위, DB 설계 아이디어  
**다음 단계**: 시스템 아키텍처 설계 → MVP 개발 시작
