# GMP CheckMaster AI - 요구사항 정의서

## 프로젝트 개요
- **프로젝트명**: GMP CheckMaster AI
- **목적**: 제약업계 GMP 규정 준수를 위한 지능형 체크리스트 관리 시스템
- **팀**: drug qrew (백승재, 풍기덕)
- **기간**: 2025-09-05 ~ 2025-09-06 (20시간)

## 1. 기능 요구사항

### 1.1 핵심 기능 (MVP)

#### F-001: 동적 체크리스트 작성
**우선순위**: HIGH  
**설명**: 관리자가 설정한 체크리스트 템플릿에 따라 작업자가 항목별로 체크할 수 있는 기능
- 다양한 입력 유형 지원 (체크박스, 숫자, 텍스트, 선택형)
- 관리자 설정 템플릿 기반 동적 생성
- 모바일 친화적 UI
- 실시간 데이터 저장
- 오프라인 임시 저장

**수용 기준**:
- 5가지 입력 유형 지원 (체크박스/숫자/텍스트/선택형/사진)
- 3분 이내 체크 완료 가능
- 터치 최적화 인터페이스
- 입력 검증 및 오류 처리

#### F-002: Amazon Q Developer 기반 출입 판정 시스템
**우선순위**: HIGH  
**설명**: AI가 체크리스트 결과를 종합 분석하여 출입 가능 여부를 판정하고 결과를 알림
- GMP 규정 기반 자동 판정 로직
- 다단계 판정 프로세스 (즉시판정 → 종합분석 → 최종결정)
- 판정 결과별 맞춤 메시지 제공
- 출입 불가 시 대안 제시 (재검, 의료진 상담 등)

**판정 결과 유형**:
- **출입 가능**: "체크 완료! 안전하게 작업하세요"
- **출입 불가**: "오늘은 출근이 어렵습니다. 충분히 휴식 후 내일 다시 체크해주세요"
- **재확인 필요**: "일부 항목 재확인이 필요합니다. 관리자에게 문의하세요"
- **의료진 상담**: "의료진 상담 후 출입 가능 여부를 결정하겠습니다"

**수용 기준**:
- 5초 이내 판정 완료
- 판정 근거 자연어 설명
- 95% 이상 정확도
- 명확하고 친근한 메시지 제공

#### F-003: Amazon Bedrock 지능형 패턴 분석
**우선순위**: HIGH  
**설명**: 개인 및 집단 건강 패턴을 AI가 분석하여 인사이트 제공
- 개인별 건강 트렌드 분석
- 집단 패턴 감지 (감기 유행 등)
- 예측적 건강 관리 권장사항

**수용 기준**:
- 최근 7일간 데이터 기반 분석
- 자연어 인사이트 제공
- 시각적 차트 표시

#### F-004: 관리자 대시보드
**우선순위**: MEDIUM  
**설명**: 관리자가 전체 현황을 모니터링할 수 있는 대시보드
- 실시간 체크 현황
- AI 분석 결과 표시
- 이상 상황 알림

**수용 기준**:
- 30초 이내 데이터 업데이트
- 직관적인 시각화
- 모바일 접근 가능

### 1.2 확장 기능 (시간 여유 시)

#### F-005: 다양한 체크리스트 템플릿 관리
**우선순위**: HIGH  
**설명**: 관리자가 다양한 종류의 체크리스트 템플릿을 생성하고 관리할 수 있는 기능

**체크리스트 유형**:
- **출입통제형**: AI 판정으로 출입 가능/불가 결정 (건강상태, 안전장비 등)
- **일반기록형**: 단순 기록 및 확인용 (청소상태, 장비점검, 환경체크 등)

**관리 기능**:
- 템플릿 생성/수정/삭제/복사
- 체크리스트 유형 선택 (출입통제/일반기록)
- 항목별 위험도 가중치 설정 (출입통제형만)
- AI 판정 규칙 설정 (자동 거부 조건, 경고 조건 등)
- 카테고리 분류 (건강/안전/환경/장비)
- 템플릿 미리보기 및 테스트

**수용 기준**:
- 5가지 입력 유형 지원
- 드래그앤드롭으로 순서 변경
- 실시간 미리보기 제공
- 템플릿 활성화/비활성화
- AI 판정 규칙 시각적 설정

#### F-008: 책임자 모니터링 및 알림
**우선순위**: HIGH  
**설명**: 책임자가 담당 팀원들의 체크리스트 현황을 모니터링하고 알림을 받는 기능
- 팀별/부서별 체크 현황 대시보드
- 미완료자 실시간 알림
- 전체 완료 시 완료 알림
- 이상 상황 즉시 알림 (출입 불가 판정 등)
- 일일/주간 리포트 자동 생성

**수용 기준**:
- 실시간 현황 업데이트 (30초 이내)
- 푸시/SMS/이메일 알림 지원
- 모바일에서 현황 확인 가능
- 필터링 및 검색 기능
**우선순위**: LOW  
**설명**: 출근 전 체크 알림 및 리마인더
- 개인별 알림 시간 설정
- SMS/푸시 알림
- 체크 완료까지 주기적 리마인더

#### F-007: 복잡한 상황 의사결정 지원
**우선순위**: LOW  
**설명**: 애매한 상황에서 AI 기반 종합 판단
- 다중 요소 분석 (체온+증상+근무이력+중요작업)
- 구체적 행동 지침 제공
- 리스크 레벨 표시

## 2. 비기능 요구사항

### 2.1 성능 요구사항
- **응답 시간**: API 응답 3초 이내
- **AI 판정**: 5초 이내 결과 제공
- **동시 사용자**: 최대 100명 지원
- **가용성**: 99% 이상 (해커톤 기간)

### 2.2 사용성 요구사항
- **모바일 최적화**: 스마트폰에서 원활한 사용
- **직관적 UI**: 별도 교육 없이 사용 가능
- **접근성**: 터치 친화적 인터페이스
- **다국어**: 한국어 우선 (영어 확장 가능)

### 2.3 보안 요구사항
- **데이터 암호화**: 개인 건강정보 암호화 저장
- **접근 제어**: 역할 기반 권한 관리
- **개인정보 보호**: GDPR/개인정보보호법 준수
- **API 보안**: JWT 토큰 기반 인증

### 2.4 호환성 요구사항
- **브라우저**: Chrome, Safari, Edge 최신 버전
- **모바일**: iOS 14+, Android 10+
- **AWS 서비스**: 서울 리전 (ap-northeast-2)

## 3. 시스템 제약사항

### 3.1 기술적 제약사항
- **개발 시간**: 20시간 이내
- **팀 규모**: 2명 (백엔드 1명, 프론트엔드 1명)
- **예산**: AWS 프리티어 범위 내
- **AI 서비스**: Amazon Q Developer + Bedrock 필수 사용

### 3.2 비즈니스 제약사항
- **데모 환경**: 실제 운영 환경 아님
- **데이터**: 샘플 데이터 사용
- **사용자**: 해커톤 심사위원 및 참가자 대상
- **유지보수**: 해커톤 기간 중에만

## 4. 사용자 스토리 매핑

### 4.1 MVP 필수 스토리
- **US-A01**: 출입 전 건강상태 체크 → F-001
- **US-A02**: AI 기반 출입 판정 → F-002
- **US-A03**: 출입 판정 결과 알림 → F-002 확장
- **US-C01**: 체크리스트 템플릿 생성 → F-005
- **US-D01**: 팀 체크리스트 현황 모니터링 → F-008

### 4.2 확장 스토리 (시간 여유 시)
- **US-B01**: 일반 업무 체크리스트 작성 → F-001 확장
- **US-B02**: 업무 기록 조회 → F-004 확장
- **US-C02**: AI 판정 규칙 설정 → F-005 확장
- **US-D02**: 이상 상황 즉시 알림 → F-008 확장

## 5. 데이터 요구사항

### 5.1 핵심 데이터 모델

#### ChecklistTemplate (체크리스트 템플릿)
```json
{
  "id": "string",
  "name": "출입 전 건강상태 체크리스트",
  "description": "공장 출입 전 필수 점검사항",
  "type": "access_control|general_check",
  "category": "health|safety|environment|equipment",
  "version": "1.0",
  "active": true,
  "ai_judgment_enabled": true,
  "items": [
    {
      "id": "item_001",
      "type": "checkbox|number|text|select|photo",
      "question": "발열이 있습니까?",
      "required": true,
      "order": 1,
      "options": ["있음", "없음"],
      "risk_weight": 10,
      "validation": {
        "min": 36.0,
        "max": 42.0,
        "pattern": "regex"
      }
    }
  ],
  "judgment_rules": {
    "auto_reject_conditions": ["발열=있음", "설사=있음"],
    "warning_conditions": ["기침=있음", "체온>37.5"],
    "required_score": 80
  },
  "created_by": "admin_user_id",
  "created_at": "datetime",
  "updated_at": "datetime"
}
```

#### ChecklistEntry (체크리스트 항목)
```json
{
  "id": "string",
  "user_id": "string",
  "template_id": "string",
  "template_type": "access_control|general_check",
  "timestamp": "datetime",
  "responses": [
    {
      "item_id": "item_001",
      "question": "발열이 있습니까?",
      "value": "있음|없음|37.2|텍스트내용"
    }
  ],
  "status": "approved|rejected|pending|medical_review|completed",
  "ai_judgment": {
    "enabled": true,
    "result": "approved|rejected|recheck|medical_consult",
    "confidence": 0.95,
    "reasoning": "체온이 정상 범위이고 증상이 없어 출입 가능합니다",
    "message": "체크 완료! 안전하게 작업하세요",
    "next_action": "proceed|rest|recheck|consult_medical"
  }
}
```

#### User (사용자)
```json
{
  "id": "string",
  "name": "string",
  "role": "worker|admin|supervisor",
  "department": "string",
  "team": "string",
  "supervisor_id": "string",
  "notification_settings": {
    "push": true,
    "sms": true,
    "email": "user@company.com"
  },
  "permissions": ["create_template", "view_reports", "manage_users"]
}
```

#### NotificationMessage (알림 메시지)
```json
{
  "id": "string",
  "user_id": "string",
  "type": "entry_result|reminder|alert",
  "title": "출입 판정 결과",
  "message": "오늘은 출근이 어렵습니다. 충분히 휴식 후 내일 다시 체크해주세요",
  "result_type": "approved|rejected|recheck|medical_consult",
  "action_required": "rest|recheck|consult",
  "sent_at": "datetime",
  "read": false
}
```

#### TeamStatus (팀 현황)
```json
{
  "team_id": "string",
  "supervisor_id": "string", 
  "date": "2025-09-05",
  "total_members": 15,
  "completed_count": 12,
  "pending_count": 2,
  "rejected_count": 1,
  "completion_rate": 80.0,
  "last_updated": "datetime"
}
```

#### HealthInsight (건강 인사이트)
```json
{
  "id": "string",
  "user_id": "string",
  "insight_type": "personal|group",
  "pattern": "string",
  "risk_level": "low|medium|high",
  "recommendations": ["string"],
  "generated_at": "datetime"
}
```

### 5.2 데이터 보관 정책
- **체크리스트 데이터**: 30일 보관
- **AI 분석 결과**: 7일 보관
- **사용자 정보**: 프로젝트 기간 중
- **로그 데이터**: 3일 보관

## 6. 인터페이스 요구사항

### 6.1 외부 시스템 연동
- **Amazon Q Developer API**: GMP 질의응답
- **Amazon Bedrock API**: 패턴 분석 및 인사이트 생성
- **Amazon SNS**: 알림 발송 (선택사항)

### 6.2 API 설계 원칙
- **RESTful API**: 표준 HTTP 메서드 사용
- **JSON 형식**: 모든 데이터 교환
- **버전 관리**: /api/v1/ 형식
- **오류 처리**: 표준 HTTP 상태 코드

## 7. 품질 요구사항

### 7.1 테스트 요구사항
- **단위 테스트**: 핵심 로직 80% 커버리지
- **통합 테스트**: AI 서비스 연동 테스트
- **사용자 테스트**: 실제 사용 시나리오 검증

### 7.2 문서화 요구사항
- **API 문서**: Swagger/OpenAPI 형식
- **사용자 가이드**: README.md
- **배포 가이드**: 인프라 설정 문서

## 8. 위험 요소 및 대응 방안

### 8.1 기술적 위험
- **AI 서비스 응답 지연**: 타임아웃 설정 및 폴백 메커니즘
- **AWS 서비스 장애**: 로컬 캐시 및 오프라인 모드
- **개발 시간 부족**: MVP 범위 축소 계획

### 8.2 비즈니스 위험
- **요구사항 변경**: 애자일 개발로 유연 대응
- **사용자 피드백**: 빠른 프로토타입으로 검증
- **데모 실패**: 백업 시나리오 준비

## 9. 출입 판정 프로세스

### 9.1 판정 워크플로우
```
1. 작업자 체크리스트 작성
   ↓
2. 모든 항목 완료 후 "제출" 버튼
   ↓  
3. Amazon Q Developer AI 분석
   - 각 항목별 위험도 평가
   - GMP 규정 준수 여부 확인
   - 종합 위험도 계산
   ↓
4. 판정 결과 생성
   - 출입 가능/불가 결정
   - 판정 근거 생성
   - 맞춤 메시지 작성
   ↓
5. 작업자에게 결과 알림
   - 앱 내 알림
   - 푸시 알림
   - SMS (선택사항)
   ↓
6. 책임자에게 현황 알림
   - 출입 불가자 즉시 알림
   - 전체 현황 업데이트
```

### 9.4 체크리스트 유형별 처리

#### 출입통제형 체크리스트
- **AI 판정 활성화**: Amazon Q Developer로 자동 분석
- **즉시 결과 제공**: 출입 가능/불가 판정
- **알림 발송**: 작업자 + 책임자에게 결과 통보
- **예시**: 건강상태 체크, 안전장비 착용 확인

#### 일반기록형 체크리스트  
- **AI 판정 비활성화**: 단순 기록 저장
- **완료 확인만**: 모든 항목 작성 완료 여부만 체크
- **선택적 알림**: 필요시에만 책임자에게 완료 알림
- **예시**: 청소상태 체크, 장비 점검, 환경 모니터링

#### 템플릿 예시

**출입통제형 - 건강상태 체크리스트**
```
1. 발열이 있습니까? (선택: 있음/없음) [위험도: 10]
2. 설사 증상이 있습니까? (선택: 있음/없음) [위험도: 10] 
3. 체온을 입력하세요 (숫자: 35.0-42.0도) [위험도: 8]
4. 기침이나 콧물이 있습니까? (선택: 있음/없음) [위험도: 6]

AI 판정 규칙:
- 발열=있음 OR 설사=있음 → 자동 거부
- 체온 > 37.5도 → 자동 거부  
- 기침=있음 → 재확인 필요
```

**일반기록형 - 청소상태 체크리스트**
```
1. 작업대 청소 완료 (체크박스)
2. 바닥 청소 완료 (체크박스)
3. 장비 청소 완료 (체크박스)
4. 청소 상태 사진 (사진 업로드)
5. 특이사항 (텍스트, 선택사항)

AI 판정: 비활성화 (단순 완료 확인만)
```

### 9.3 메시지 템플릿
#### 출입 가능
- "✅ 체크 완료! 안전하게 작업하세요"
- "모든 항목이 정상입니다. 좋은 하루 되세요!"

#### 출입 불가
- "❌ 오늘은 출근이 어렵습니다. 충분히 휴식 후 내일 다시 체크해주세요"
- "건강 상태가 좋지 않습니다. 의료진 상담을 받아보시기 바랍니다"

#### 재확인 필요
- "⚠️ 일부 항목 재확인이 필요합니다. 관리자에게 문의하세요"
- "추가 확인이 필요합니다. 잠시 후 다시 체크해주세요"

---
**작성자**: 백승재  
**검토자**: 풍기덕  
**승인자**: drug qrew 팀  
**작성일**: 2025-09-05 14:47  
**버전**: v1.0
