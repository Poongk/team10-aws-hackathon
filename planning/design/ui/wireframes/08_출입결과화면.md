# 08. 출입 결과 화면 와이어프레임

## 화면 개요
- **목적**: QR 스캔 후 출입 가능/불가 결과 표시 + 추가 조치 안내
- **사용자**: 보안담당자 (정보안)
- **플랫폼**: 모바일 전용 (QR 스캔 후 즉시 표시)

## 와이어프레임

### 출입 승인 결과 화면
```
┌─────────────────────────┐
│ ← 뒤로   출입 결과     📷 │
│                         │
│ 👮 정보안님 (보안팀)     │
│ 📅 2025-09-05 20:32     │
│                         │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                         │
│    ✅ 출입 승인!        │
│                         │
│ ┌─────────────────┐    │
│ │ 👤 김작업        │    │
│ │ 🏢 생산팀A       │    │
│ │ 🆔 EMP001       │    │
│ │                 │    │
│ │ 📋 위생상태점검   │    │
│ │ ⏰ 07:45 완료    │    │
│ │ 🤖 AI 판정: 정상  │    │
│ └─────────────────┘    │
│                         │
│ 💡 모든 위생상태가      │
│    정상입니다          │
│                         │
│ 🕐 QR 유효: 17:30까지   │
│                         │
│ ┌─────────────────┐    │
│ │ ✅ 출입 허용     │    │
│ └─────────────────┘    │
│ ┌─────────────────┐    │
│ │ 📷 다음 스캔     │    │
│ └─────────────────┘    │
│                         │
└─────────────────────────┘
```

### 출입 거부 결과 화면
```
┌─────────────────────────┐
│ ← 뒤로   출입 결과     📷 │
│                         │
│ 👮 정보안님 (보안팀)     │
│ 📅 2025-09-05 20:32     │
│                         │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                         │
│    🚫 출입 불가!        │
│                         │
│ ┌─────────────────┐    │
│ │ 👤 이작업        │    │
│ │ 🏢 생산팀C       │    │
│ │ 🆔 EMP003       │    │
│ │                 │    │
│ │ 📋 위생상태점검   │    │
│ │ ⏰ 08:15 완료    │    │
│ │ 🤖 AI 판정: 위험  │    │
│ └─────────────────┘    │
│                         │
│ ⚠️ 발열/설사/구토 증상  │
│    감지됨              │
│                         │
│ 📋 필수 조치:           │
│ • 즉시 귀가 조치        │
│ • 의료진 상담 권장      │
│ • 증상 완화 후 재검토   │
│                         │
│ ┌─────────────────┐    │
│ │ 🚫 출입 거부     │    │
│ └─────────────────┘    │
│ ┌─────────────────┐    │
│ │ 📞 운영팀 연락    │    │
│ └─────────────────┘    │
│ ┌─────────────────┐    │
│ │ 📷 다음 스캔     │    │
│ └─────────────────┘    │
│                         │
└─────────────────────────┘
```

### 재확인 필요 결과 화면
```
┌─────────────────────────┐
│ ← 뒤로   출입 결과     📷 │
│                         │
│ 👮 정보안님 (보안팀)     │
│ 📅 2025-09-05 20:32     │
│                         │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                         │
│    ⚠️ 재확인 필요!       │
│                         │
│ ┌─────────────────┐    │
│ │ 👤 박작업        │    │
│ │ 🏢 생산팀B       │    │
│ │ 🆔 EMP002       │    │
│ │                 │    │
│ │ 📋 위생상태점검   │    │
│ │ ⏰ 08:10 완료    │    │
│ │ 🤖 AI 판정: 주의  │    │
│ └─────────────────┘    │
│                         │
│ 💡 복장 상태를 점검해주세요│
│                         │
│ 📋 확인 사항:           │
│ • 복장이 적절한가?      │
│ • 장신구를 제거했는가?   │
│ • 두발이 정리되었는가?   │
│                         │
│ ┌─────────────────┐    │
│ │ ✅ 확인 후 승인   │    │
│ └─────────────────┘    │
│ ┌─────────────────┐    │
│ │ 🚫 재점검 요청    │    │
│ └─────────────────┘    │
│ ┌─────────────────┐    │
│ │ 📷 다음 스캔     │    │
│ └─────────────────┘    │
│                         │
└─────────────────────────┘
```

### QR 코드 만료 화면
```
┌─────────────────────────┐
│ ← 뒤로   출입 결과     📷 │
│                         │
│ 👮 정보안님 (보안팀)     │
│ 📅 2025-09-05 20:32     │
│                         │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                         │
│    ⏰ QR 코드 만료!     │
│                         │
│ ┌─────────────────┐    │
│ │ 👤 최작업        │    │
│ │ 🏢 생산팀D       │    │
│ │ 🆔 EMP004       │    │
│ │                 │    │
│ │ 📋 위생상태점검   │    │
│ │ ⏰ 16:45 완료    │    │
│ │ 🕐 17:30 만료    │    │
│ └─────────────────┘    │
│                         │
│ 💡 QR 코드가 만료되었습니다│
│                         │
│ 📋 안내 사항:           │
│ • 새로운 체크리스트 작성 필요│
│ • 운영팀에 문의하세요    │
│ • 긴급시 수동 확인 가능  │
│                         │
│ ┌─────────────────┐    │
│ │ 🚫 출입 불가     │    │
│ └─────────────────┘    │
│ ┌─────────────────┐    │
│ │ 📞 운영팀 연락    │    │
│ └─────────────────┘    │
│ ┌─────────────────┐    │
│ │ 🔧 수동 확인     │    │
│ └─────────────────┘    │
│                         │
└─────────────────────────┘
```

### 잘못된 QR 코드 화면
```
┌─────────────────────────┐
│ ← 뒤로   출입 결과     📷 │
│                         │
│ 👮 정보안님 (보안팀)     │
│ 📅 2025-09-05 20:32     │
│                         │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                         │
│    ❌ 잘못된 QR 코드!   │
│                         │
│ ┌─────────────────┐    │
│ │                 │    │
│ │   QR_INVALID     │    │
│ │                 │    │
│ │ 🚫 인식할 수 없는 │    │
│ │    QR 코드입니다  │    │
│ │                 │    │
│ └─────────────────┘    │
│                         │
│ 💡 다음을 확인해주세요:  │
│                         │
│ • QR 코드가 손상되었나요?│
│ • 올바른 QR 코드인가요? │
│ • 네트워크가 연결되었나요?│
│                         │
│ ┌─────────────────┐    │
│ │ 🔄 다시 스캔     │    │
│ └─────────────────┘    │
│ ┌─────────────────┐    │
│ │ 📝 수동 입력     │    │
│ └─────────────────┘    │
│ ┌─────────────────┐    │
│ │ 📞 기술지원 요청  │    │
│ └─────────────────┘    │
│                         │
└─────────────────────────┘
```

### 수동 확인 화면
```
┌─────────────────────────┐
│ ← 뒤로   수동 확인     📷 │
│                         │
│ 👮 정보안님 (보안팀)     │
│ 📅 2025-09-05 20:32     │
│                         │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                         │
│ 🔧 수동 확인 모드        │
│                         │
│ ┌─────────────────┐    │
│ │ 👤 최작업        │    │
│ │ 🏢 생산팀D       │    │
│ │ 🆔 EMP004       │    │
│ │                 │    │
│ │ 📋 QR 만료       │    │
│ │ ⏰ 17:30 만료    │    │
│ └─────────────────┘    │
│                         │
│ 📋 수동 확인 체크리스트: │
│                         │
│ ☐ 신분증 확인           │
│ ☐ 체온 측정 (36.5°C)   │
│ ☐ 복장 상태 확인        │
│ ☐ 위생 상태 확인        │
│                         │
│ 📝 확인 사유:           │
│ ┌─────────────────┐    │
│ │ QR 만료로 인한   │    │
│ │ 수동 확인        │    │
│ └─────────────────┘    │
│                         │
│ ┌─────────────────┐    │
│ │ ✅ 수동 승인     │    │
│ └─────────────────┘    │
│ ┌─────────────────┐    │
│ │ 🚫 수동 거부     │    │
│ └─────────────────┘    │
│                         │
└─────────────────────────┘
```

## 상호작용 설계

### 결과 표시 프로세스
1. **QR 스캔 완료** → 07_QR스캐너화면에서 전환
2. **서버 응답 처리** → 판정 결과에 따른 화면 분기
3. **결과 표시** → 승인/거부/재확인/만료/오류 화면
4. **액션 버튼** → 다음 단계 안내

### 결과별 액션
1. **승인 시**
   - ✅ 출입 허용 → 출입문 자동 개방 신호
   - 📷 다음 스캔 → 07_QR스캐너화면 복귀

2. **거부 시**
   - 🚫 출입 거부 → 출입문 잠금 유지
   - 📞 운영팀 연락 → 전화 앱 실행
   - 📷 다음 스캔 → 07_QR스캐너화면 복귀

3. **재확인 시**
   - ✅ 확인 후 승인 → 수동 승인 처리
   - 🚫 재점검 요청 → 운영팀에 재점검 요청
   - 📷 다음 스캔 → 07_QR스캐너화면 복귀

4. **만료/오류 시**
   - 🔄 다시 스캔 → 07_QR스캐너화면 복귀
   - 📝 수동 입력 → 07_QR스캐너화면 수동입력 모드
   - 🔧 수동 확인 → 수동 확인 화면 전환

### 자동 전환
1. **3초 자동 복귀** → 승인 시 자동으로 스캐너 화면 복귀
2. **5초 알림 유지** → 거부/재확인 시 충분한 확인 시간
3. **음성 안내** → "출입이 승인되었습니다" 등 음성 피드백

### 출입문 연동
1. **승인 시** → 출입문 자동 개방 (3초간)
2. **거부 시** → 출입문 잠금 유지 + 경고음
3. **재확인 시** → 보안담당자 수동 제어

## 데이터 구조

### 출입 결과 데이터
```javascript
const accessResult = {
  scan_id: "scan_20250905_001",
  result: "approved", // approved/rejected/review_required/expired/invalid
  user_info: {
    user_id: "worker1",
    name: "김작업",
    employee_id: "EMP001",
    team: "생산팀A",
    photo_url: "https://..."
  },
  checklist_info: {
    template_name: "위생상태점검",
    completed_at: "2025-09-05T07:45:00Z",
    ai_judgment: "정상",
    qr_expires_at: "2025-09-05T17:30:00Z"
  },
  access_decision: {
    granted: true,
    reason: "모든 위생상태가 정상입니다",
    additional_checks: [],
    manual_override: false
  },
  door_control: {
    action: "open", // open/keep_locked/manual
    duration: 3000 // 3초간 개방
  },
  scanned_by: "security1",
  scanned_at: "2025-09-05T20:32:00Z"
};
```

### 수동 확인 데이터
```javascript
const manualCheck = {
  user_id: "worker4",
  reason: "QR 만료로 인한 수동 확인",
  checks: [
    { item: "신분증 확인", checked: true },
    { item: "체온 측정", checked: true, value: "36.5°C" },
    { item: "복장 상태", checked: true },
    { item: "위생 상태", checked: true }
  ],
  decision: "approved", // approved/rejected
  checked_by: "security1",
  checked_at: "2025-09-05T20:32:00Z",
  notes: "모든 항목 정상 확인"
};
```

### 출입문 제어 신호
```javascript
const doorControl = {
  door_id: "main_entrance",
  action: "open", // open/close/lock/unlock
  duration: 3000, // milliseconds
  triggered_by: "qr_scan",
  scan_id: "scan_20250905_001",
  timestamp: "2025-09-05T20:32:00Z"
};
```

## CSS 스타일 가이드

### 결과별 테마 색상
```css
.result-container {
  padding: 20px;
  border-radius: 12px;
  text-align: center;
  margin: 16px 0;
}

.result-approved {
  background: linear-gradient(135deg, #f6ffed 0%, #d9f7be 100%);
  border: 2px solid #52c41a;
}

.result-approved .result-icon {
  color: #52c41a;
  font-size: 48px;
  animation: approved-bounce 0.6s ease-out;
}

.result-rejected {
  background: linear-gradient(135deg, #fff2f0 0%, #ffccc7 100%);
  border: 2px solid #f5222d;
}

.result-rejected .result-icon {
  color: #f5222d;
  font-size: 48px;
  animation: rejected-shake 0.6s ease-out;
}

.result-review {
  background: linear-gradient(135deg, #fffbe6 0%, #fff1b8 100%);
  border: 2px solid #faad14;
}

.result-review .result-icon {
  color: #faad14;
  font-size: 48px;
  animation: review-pulse 1s infinite;
}

.result-expired {
  background: linear-gradient(135deg, #f0f0f0 0%, #d9d9d9 100%);
  border: 2px solid #8c8c8c;
}

.result-invalid {
  background: linear-gradient(135deg, #fff0f6 0%, #ffd6e7 100%);
  border: 2px solid #eb2f96;
}

@keyframes approved-bounce {
  0% { transform: scale(0); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

@keyframes rejected-shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-10px); }
  75% { transform: translateX(10px); }
}

@keyframes review-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}
```

### 사용자 정보 카드
```css
.user-info-card {
  background: white;
  border-radius: 8px;
  padding: 16px;
  margin: 16px 0;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  text-align: left;
}

.user-info-row {
  display: flex;
  align-items: center;
  margin: 8px 0;
  font-size: 14px;
}

.user-info-icon {
  width: 20px;
  margin-right: 8px;
  color: #595959;
}

.user-info-label {
  color: #8c8c8c;
  margin-right: 8px;
}

.user-info-value {
  font-weight: 500;
  color: #262626;
}
```

### 액션 버튼
```css
.action-buttons {
  margin: 24px 0;
}

.action-button {
  width: 100%;
  padding: 16px;
  margin: 8px 0;
  border: none;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.action-button.primary {
  background: #52c41a;
  color: white;
}

.action-button.primary:hover {
  background: #389e0d;
  transform: translateY(-1px);
}

.action-button.danger {
  background: #f5222d;
  color: white;
}

.action-button.danger:hover {
  background: #cf1322;
  transform: translateY(-1px);
}

.action-button.warning {
  background: #faad14;
  color: white;
}

.action-button.secondary {
  background: #f0f0f0;
  color: #595959;
  border: 1px solid #d9d9d9;
}

.action-button.secondary:hover {
  background: #e6f7ff;
  color: #1890ff;
  border-color: #91d5ff;
}
```

### 체크리스트 스타일
```css
.manual-checklist {
  background: white;
  border-radius: 8px;
  padding: 16px;
  margin: 16px 0;
}

.check-item {
  display: flex;
  align-items: center;
  padding: 8px 0;
  border-bottom: 1px solid #f0f0f0;
}

.check-item:last-child {
  border-bottom: none;
}

.check-box {
  width: 20px;
  height: 20px;
  border: 2px solid #d9d9d9;
  border-radius: 4px;
  margin-right: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.check-box.checked {
  background: #52c41a;
  border-color: #52c41a;
  color: white;
}

.check-box.checked::after {
  content: "✓";
  display: block;
  text-align: center;
  line-height: 16px;
  font-size: 12px;
}

.check-label {
  flex: 1;
  font-size: 14px;
  color: #262626;
}

.check-value {
  font-size: 12px;
  color: #8c8c8c;
}
```

## 접근성 고려사항
- **음성 안내**: 결과별 명확한 음성 피드백
- **색상 대비**: WCAG 2.1 AA 기준 준수
- **큰 버튼**: 터치하기 쉬운 44px 이상 버튼
- **명확한 아이콘**: 텍스트와 아이콘 조합으로 의미 전달
- **진동 피드백**: 결과별 다른 진동 패턴

## 성능 최적화
- **빠른 렌더링**: 결과 화면 0.5초 내 표시
- **자동 전환**: 불필요한 사용자 액션 최소화
- **캐시 활용**: 사용자 정보 로컬 캐시
- **배터리 절약**: 화면 밝기 자동 조절

## 보안 고려사항
- **출입 로그**: 모든 출입 시도 기록
- **수동 확인 추적**: 수동 승인 사유 및 담당자 기록
- **권한 검증**: 보안담당자 권한 재확인
- **감사 추적**: 모든 액션 타임스탬프 기록

---
**화면 ID**: 08  
**이전 화면**: 07_QR스캐너화면.md  
**다음 화면**: 07_QR스캐너화면.md (다음 스캔 시)  
**관련 문서**: 00_공통가이드.md, 00_화면구성개요.md
